---
layout: post
title: Deploying Jakarta EE 9 applications to Apache TomEE
---

<h4>Apache TomEE(aka Apache Tomcat + Java EE/Jakarta EE) is a lightweight open-source Jakarta EE application server.</h4><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*XZgar-TMaqJ9r-ovXsLz_A.png" /></figure><p>Currently it provides a Jakarta EE 9 preview version in the <a href="http://tomee.apache.org/download-ng.html">download page</a> which is <a href="https://github.com/apache/tomee-jakarta">converted from the TomEE 8 by the Eclipse Transformer tooling project</a>.</p><p>There are several options of TomEE 9 in the download page, choose a variant according to your requirements, for the details of these variants go to the <a href="http://tomee.apache.org/comparison.html">feature comparison</a> page.</p><blockquote><em>NOTE: Apache TomEE is Web Profile compatible, not an implementation of Full Profile.</em></blockquote><p><strong>Get the </strong><a href="https://github.com/hantsy/jakartaee9-starter-boilerplate"><strong>source codes</strong></a><strong> from my Github.</strong></p><h3>Prerequisites</h3><p>Make sure you have installed the following software.</p><ul><li>Java 11 (<a href="https://openjdk.java.net/install/">OpenJDK</a> or <a href="https://adoptopenjdk.net/installation.html">AdoptOpenJDK</a>)</li><li><a href="http://maven.apache.org/download.cgi">Apache Maven 3.6.3</a></li><li><a href="http://tomee.apache.org/download-ng.html">Apache TomEE (Plume) 9.0.0-M3</a></li></ul><h3>Manual Deployment</h3><p>As an example, we select the <em>plume</em> version, which includes a super feature collection of Web Profile .</p><p>Extract the files from the downloaded archive into your local disk. The TomEE file structure is similar to Apache Tomcat.</p><p>To start a TomEE server, open a terminal window, enter the TomEE root folder and switch to <em>bin</em> folder, execute the following command to start a TomEE server in a separate window.</p><pre># Windows<br>startup.bat<br># or <br>catalina.bat start</pre><pre># Linux like system.<br>sh ./startup.sh</pre><p>Or run the TomEE server in the same window by executing the following command.</p><pre># Windows<br>catalina.bat run</pre><pre># Linux like system.<br>sh ./catalina.sh run</pre><p>You will see the start up progress in the TomEE server console.</p><pre>Using CATALINA_BASE:   &quot;D:\appsvr\apache-tomee-plume-9.0.0-M3&quot;<br>Using CATALINA_HOME:   &quot;D:\appsvr\apache-tomee-plume-9.0.0-M3&quot;<br>Using CATALINA_TMPDIR: &quot;D:\appsvr\apache-tomee-plume-9.0.0-M3\temp&quot;<br>Using JRE_HOME:        &quot;D:\jdk11&quot;<br>Using CLASSPATH:       &quot;D:\appsvr\apache-tomee-plume-9.0.0-M3\bin\bootstrap.jar;D:\appsvr\apache-tomee-plume-9.0.0-M3\bin\tomcat-juli.jar&quot;<br>Using CATALINA_OPTS:   &quot;&quot;<br>...</pre><p>Execute the following command in the project root folder to build the project into a <em>war</em> package in the <em>target</em> folder.</p><pre>mvn clean package</pre><p>To deploy the application, just copy the <em>target/jakartaee9-starter-boilerplate.war</em> to the <em>[tomee install dir]/webapps</em> folder.</p><p>In the console window, you will see the deployment progress is started automatically.</p><pre>29-Nov-2020 15:40:33.673 INFO [Catalina-utility-1] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Deploying web application archive [D:\appsvr\apache-tomee-plume-9.0.0-M3\webapps\jakartaee9-starter-boilerplate.war]<br>29-Nov-2020 15:40:33.673 INFO [Catalina-utility-1] org.apache.tomee.catalina.TomcatWebAppBuilder.init ------------------------- localhost -&gt; /jakartaee9-starter-boilerplate</pre><pre>...</pre><pre>29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api">http://localhost:8080/jakartaee9-starter-boilerplate/api</a>                 -&gt; com.example.JaxrsActivator@69c1f1fe<br>29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a>        -&gt; Pojo com.example.GreetingResource<br>29-Nov-2020 15:40:37.955 INFO [Catalina-utility-1] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}</a> -&gt;      Response greeting(String)<br>29-Nov-2020 15:40:38.003 INFO [Catalina-utility-1] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Deployment of web application archive [D:\appsvr\apache-tomee-plume-9.0.0-M3\webapps\jakartaee9-starter-boilerplate.war] has finished in [4,330] ms</pre><p>Once it is deployed successfully, use curl command to verify the deployment result.</p><pre>curl <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/Hantsy">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/Hantsy</a><br>{&quot;message&quot;:&quot;Say Hello to Hantsy at 2020-11-29T15:44:29.252675900&quot;}</pre><p>To undeploy the application, just remove the <strong>war</strong> file from the <em>[tomee install dir]/webapps</em> folder. Wait a second, you will see the undeployment progress in the TomEE console.</p><p>To stop the running TomEE server, just send a CTRL+C signal in the TomEE console, or execute the shutdown command in another terminal window.</p><pre># Linux like system.<br>[tomee install dir]/bin/shutdown  </pre><pre># Windows<br>[tomee install dir]\bin\shutdown.bat</pre><h3>Using TomEE Maven Plugin</h3><p>Apache TomEE provides a official maven plugin for developers to deploy and undeploy applications to TomEE server in application development stage.</p><p>Declare the tomee-maven-plugin under plugins in the <em>pom.xml</em> file.</p><pre>&lt;plugin&gt;<br>    &lt;groupId&gt;org.apache.tomee.maven&lt;/groupId&gt;<br>    &lt;artifactId&gt;tomee-maven-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${tomee-maven-plugin.version}&lt;/version&gt;<br>&lt;/plugin&gt;</pre><p>Define a tomee-maven-plugin.version property to specify the version of tomee-maven-plugin to use.</p><pre>&lt;tomee-maven-plugin.version&gt;8.0.5&lt;/tomee-maven-plugin.version&gt;</pre><blockquote><em>NOTE: Currently </em><em>tomee-maven-plugin does not provide a preview version for Jakarta EE 9/TomEE 9, but the stable version(8.0.5) works great with the latest TomEE 9 preview version.</em></blockquote><p>By default, tomee-maven-plugin will retrieve the latest stable version to serve your application. Add the following properties in the configuration of tomee-maven-plugin to force it to use the latest TomEE 9.0.0-M3 instead.</p><pre>&lt;!-- download and run on a managed Apache TomEE server --&gt;<br>&lt;tomeeVersion&gt;${tomee.version}&lt;/tomeeVersion&gt;<br>&lt;tomeeArtifactId&gt;apache-tomee&lt;/tomeeArtifactId&gt;<br>&lt;tomeeGroupId&gt;org.apache.tomee.jakarta&lt;/tomeeGroupId&gt;<br>&lt;tomeeClassifier&gt;plume&lt;/tomeeClassifier&gt;</pre><p>Define a tomeeVersion to specify the TomEE version.</p><pre>&lt;tomee.version&gt;9.0.0-M3&lt;/tomee.version&gt;</pre><blockquote><em>NOTE: The </em><em>tomeeGroupId is </em><strong><em>org.apache.tomee.jakarta</em></strong><em>, which is different from the stable version, TomEE 8.0 uses groupId </em><strong><em>org.apache.tomee</em></strong><em>.</em></blockquote><p>OK, now run the following command to start a TomEE 9 server and deploy the applications.</p><pre>mvn clean package tomee:run -Ptomee</pre><p>You will see the following info in the TomEE console.</p><pre>[INFO] --- tomee-maven-plugin:8.0.5:run (default-cli) @ jakartaee9-starter-boilerplate ---<br>[INFO] TomEE was unzipped in &#39;D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee&#39;<br>[INFO] Removed not mandatory default webapps<br>[INFO] Installed &#39;D:\hantsylabs\jakartaee9-starter-boilerplate\target\jakartaee9-starter-boilerplate.war&#39; in D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee\webapps\ja<br>kartaee9-starter-boilerplate.war<br>[INFO] TomEE will run in development mode<br>[INFO] Running &#39;org.apache.openejb.maven.plugin.run&#39;. Configured TomEE in plugin is localhost:8080 (plugin shutdown port is 8005 and https port is null)<br>// ...<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server version name:   Apache Tomcat (TomEE)/9.0.39 (8.0.5)<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server built:          Oct 6 2020 14:11:46 UTC<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Server version number: 9.0.39.0<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke OS Name:               Windows 10<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke OS Version:            10.0<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Architecture:          amd64<br>29-Nov-2020 14:50:20.179 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Java Home:             D:\jdk11<br>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke JVM Version:           11.0.9.1+1<br>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke JVM Vendor:            AdoptOpenJDK<br>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke CATALINA_BASE:         D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee<br>29-Nov-2020 14:50:20.194 INFO [main] jdk.internal.reflect.NativeMethodAccessorImpl.invoke CATALINA_HOME:         D:\hantsylabs\jakartaee9-starter-boilerplate\target\apache-tomee</pre><pre>//...</pre><pre>29-Nov-2020 14:50:28.371 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api">http://localhost:8080/jakartaee9-starter-boilerplate/api</a><br>        -&gt; com.example.JaxrsActivator@2ab8589a<br>29-Nov-2020 14:50:28.386 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a><br>        -&gt; Pojo com.example.GreetingResource<br>29-Nov-2020 14:50:28.386 INFO [main] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a><br>/{name} -&gt;      Response greeting(String)<br>...<br>29-Nov-2020 14:50:29.325 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG]<br>took [829] milliseconds.<br>29-Nov-2020 14:50:29.341 INFO [main] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Starting ProtocolHandler [&quot;http-nio-8080&quot;]<br>29-Nov-2020 14:50:29.348 INFO [main] jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke Server startup in [6177] milliseconds</pre><p>You can also use tomee-maven-plugin to deploy the application to a running TomEE server, esp. running on a remote server.</p><p>Open the <em>[tomee install dir]/conf/tomcat-users.xml</em> file, uncomment the following the configuration.</p><pre>&lt;!-- Activate those lines to get access to TomEE GUI if added (tomee-webaccess) --&gt;</pre><pre>&lt;role rolename=&quot;tomee-admin&quot; /&gt;<br>&lt;user username=&quot;tomee&quot; password=&quot;tomee&quot; roles=&quot;tomee-admin,manager-gui&quot; /&gt;</pre><p>Open the <em>[tomee install dir]/conf/system.properties</em> file, uncomment and modify the following items.</p><pre>tomee.remote.support = true<br>tomee.serialization.class.blacklist = -<br>tomee.serialization.class.whitelist = com.example.<br>openejb.system.apps = true<br>openejb.servicemanager.enabled = true</pre><p>Let’s return to the project <em>pom.xml</em> file, replace the former tomee-maven-plugin configuration with the following.</p><pre>&lt;configuration&gt;<br>    &lt;tomeeHost&gt;localhost&lt;/tomeeHost&gt;<br>    &lt;user&gt;tomee&lt;/user&gt;<br>    &lt;password&gt;tomee&lt;/password&gt;<br>    &lt;path&gt;${project.build.directory}/${project.build.finalName}.war&lt;/path&gt;<br>&lt;/configuration&gt;</pre><p>Make sure the TomEE server is running, run the following command in the project root folder.</p><pre>mvn clean package tomee:deploy -Ptomee</pre><p>You can view the deployment progress info in the TomEE console.</p><pre>...<br>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api">http://localhost:8080/jakartaee9-starter-boilerplate/api</a>                 -&gt; com.example.JaxrsActivator@affb16f<br>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting</a>        -&gt; Pojo com.example.GreetingResource<br>29-Nov-2020 16:56:23.550 INFO [http-nio-8080-exec-8] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET <a href="http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}">http://localhost:8080/jakartaee9-starter-boilerplate/api/greeting/{name}</a> -&gt;      Response greeting(String)</pre><p>To undeploy the application, execute the following command.</p><pre>mvn tomee:undeploy -Ptomee</pre><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=e1a9b9399d9b" width="1" height="1" alt=""><hr><p><a href="https://itnext.io/deploying-jakarta-ee-9-applications-to-apache-tomee-e1a9b9399d9b">Deploying Jakarta EE 9 applications to Apache TomEE</a> was originally published in <a href="https://itnext.io">ITNEXT</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>
