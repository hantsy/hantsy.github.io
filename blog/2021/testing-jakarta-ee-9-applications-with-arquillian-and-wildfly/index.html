<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>
  Hantsy
  
  Bai
  
  
  | Testing Jakarta EE 9 Applications with Arquillian and WildFly
  
</title>
<meta name="description" content="My personal website focusing on Java EE/Jakarta EE and Spring.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css"
  integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css"
  integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css"
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet"
  href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<link rel="stylesheet" href="/assets/css/main.css">

<link rel="canonical" href="/blog/2021/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-18SZ2W3GXD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-18SZ2W3GXD');
</script>




  
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="blank" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Testing Jakarta EE 9 Applications with Arquillian and WildFly" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="With the long-awaited Jakarta EE 9 support issue was fixed in the newest 5.0.0.Alpha1 version of WildFly Arquillian project, finally we can test Jakarta EE 9 applications against WildFly application server with the newest Arquillian adapters. Photo by Evgeny Nelmin on Unsplash In this post, we will explore testing Jakarta EE 9 application with various WildFly Arquillian adapters. WildFly Arquillian Managed Container, in this case the Arquillian controller is responsible for starting and stopping the WildFly server via administrative tools.WildFly Arquillian Remote Container, Arquillian does not start and stop the WildFly server, it deploys the test archive to a running WildFly server through available remote protocols, such as HTTP, JMX etc.WildFly Arquillian Embedded Container, similar to the managed adapter, but embedded adapter controls the WildFly server via embedded WildFly APIs, generally the test itself and the server would run on the same thread.WildFly Arquillian Managed Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Remote Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Bootable JAR Container, it deploys the test archive on the bootable JAR built by maven bootable jar plugin. Here we focus on the first three adapters. Prerequisites Java 11 (OpenJDK or AdoptOpenJDK)The latest Apache MavenThe basic knowledge of JUnit 5Get to know the basic of ArquillianDownload a copy of WildFly server, please download the Jakarta EE 9 tech preview version. Code Examples Get the source codes from my Github, and read the docs to understand the project structure and the existing source codes. We will focus on the Arquillian configurations for these WildFly adapters. Configuring WildFly Managed Container Adapter Add the following dependencies into your project, the Jersey related dependencies are used for test RESTful APIs using JAXRS Client API. WildFly includes its built-in JAXRS implementation — RESTEasy(maybe transformed by Jakarta EE 9 migration tools), but currently there is no public official RESTEasy versions released for Jakarta EE 9. &lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt; &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt; &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt; &lt;artifactId&gt;jersey-client&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-managed&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; Create a container configuration in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-managed&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; You can define a jbossHome property in the arquillian.xml file to specify the location of the existing WildFly server in your local system. Alternatively, to get a clean environment to run your tests every time, you can configure a Dependency Maven Plugin to download a copy of WildFly, and use it to run your tests. This is a great option to run the tests continuously in your CI servers. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-managed&lt;/arquillian.launch&gt; &lt;serverConfig&gt;standalone-full.xml&lt;/serverConfig&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Note: we use wildfly-preview-dist artifactId here to download the WildFly Jakarta EE 9 preview version. Open your terminal and witch to the project root folder. Run the following command to run the tests against WildFly server. mvn clean verify -Parq-wildfly-managed Configuring WildFly Remote Container Adapter With Arquillian WildFly Remote Container adapter, you can run the tests against a running WildFly server, esp. it is running on a different host. Adding the following wildfly-arquillian-container-remote dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-remote&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. And add a container section in the arquillian.xml file for this remote container, and configure the essential properties, such as username, password, protocoletc. &lt;container qualifier=&quot;wildfly-remote&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;protocol&quot;&gt;http-remoting&lt;/property&gt; &lt;property name=&quot;username&quot;&gt;admin&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;Admin@123&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Before executing the tests, setup a admin user configured in the above codes. Go to the WildFly installation folder, run the following command to enable the user admin. &lt;WF_HOME&gt;/bin/add-user.sh admin Admin@123 --silent And make sure the target WildFly server is running. Execute the following command to run tests against the running WildFly server. mvn clean verfiy -Parq-wildfly-managed Configuring WildFly Embedded Container Adapter The configuration of the WildFly embedded adapter is similar to the WildFly managed adapter. Adding the following wildfly-arquillian-container-embedded dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. Configure a containerfor this WildFly Embedded adapter in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-embedded&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Similarly, use maven dependency plugin to download a copy of WildFly dist as the runtime server. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-embedded&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Run tests against WildFly Embedded adapter. mvn clean verfiy -Parq-wildfly-embedded Grab a copy of the source codes from my Github, and explore them yourself. &lt;hr&gt;&lt;p&gt;Testing Jakarta EE 9 Applications with Arquillian and WildFly was originally published in ITNEXT on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;" />
<meta property="og:description" content="With the long-awaited Jakarta EE 9 support issue was fixed in the newest 5.0.0.Alpha1 version of WildFly Arquillian project, finally we can test Jakarta EE 9 applications against WildFly application server with the newest Arquillian adapters. Photo by Evgeny Nelmin on Unsplash In this post, we will explore testing Jakarta EE 9 application with various WildFly Arquillian adapters. WildFly Arquillian Managed Container, in this case the Arquillian controller is responsible for starting and stopping the WildFly server via administrative tools.WildFly Arquillian Remote Container, Arquillian does not start and stop the WildFly server, it deploys the test archive to a running WildFly server through available remote protocols, such as HTTP, JMX etc.WildFly Arquillian Embedded Container, similar to the managed adapter, but embedded adapter controls the WildFly server via embedded WildFly APIs, generally the test itself and the server would run on the same thread.WildFly Arquillian Managed Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Remote Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Bootable JAR Container, it deploys the test archive on the bootable JAR built by maven bootable jar plugin. Here we focus on the first three adapters. Prerequisites Java 11 (OpenJDK or AdoptOpenJDK)The latest Apache MavenThe basic knowledge of JUnit 5Get to know the basic of ArquillianDownload a copy of WildFly server, please download the Jakarta EE 9 tech preview version. Code Examples Get the source codes from my Github, and read the docs to understand the project structure and the existing source codes. We will focus on the Arquillian configurations for these WildFly adapters. Configuring WildFly Managed Container Adapter Add the following dependencies into your project, the Jersey related dependencies are used for test RESTful APIs using JAXRS Client API. WildFly includes its built-in JAXRS implementation — RESTEasy(maybe transformed by Jakarta EE 9 migration tools), but currently there is no public official RESTEasy versions released for Jakarta EE 9. &lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt; &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt; &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt; &lt;artifactId&gt;jersey-client&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-managed&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; Create a container configuration in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-managed&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; You can define a jbossHome property in the arquillian.xml file to specify the location of the existing WildFly server in your local system. Alternatively, to get a clean environment to run your tests every time, you can configure a Dependency Maven Plugin to download a copy of WildFly, and use it to run your tests. This is a great option to run the tests continuously in your CI servers. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-managed&lt;/arquillian.launch&gt; &lt;serverConfig&gt;standalone-full.xml&lt;/serverConfig&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Note: we use wildfly-preview-dist artifactId here to download the WildFly Jakarta EE 9 preview version. Open your terminal and witch to the project root folder. Run the following command to run the tests against WildFly server. mvn clean verify -Parq-wildfly-managed Configuring WildFly Remote Container Adapter With Arquillian WildFly Remote Container adapter, you can run the tests against a running WildFly server, esp. it is running on a different host. Adding the following wildfly-arquillian-container-remote dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-remote&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. And add a container section in the arquillian.xml file for this remote container, and configure the essential properties, such as username, password, protocoletc. &lt;container qualifier=&quot;wildfly-remote&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;protocol&quot;&gt;http-remoting&lt;/property&gt; &lt;property name=&quot;username&quot;&gt;admin&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;Admin@123&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Before executing the tests, setup a admin user configured in the above codes. Go to the WildFly installation folder, run the following command to enable the user admin. &lt;WF_HOME&gt;/bin/add-user.sh admin Admin@123 --silent And make sure the target WildFly server is running. Execute the following command to run tests against the running WildFly server. mvn clean verfiy -Parq-wildfly-managed Configuring WildFly Embedded Container Adapter The configuration of the WildFly embedded adapter is similar to the WildFly managed adapter. Adding the following wildfly-arquillian-container-embedded dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. Configure a containerfor this WildFly Embedded adapter in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-embedded&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Similarly, use maven dependency plugin to download a copy of WildFly dist as the runtime server. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-embedded&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Run tests against WildFly Embedded adapter. mvn clean verfiy -Parq-wildfly-embedded Grab a copy of the source codes from my Github, and explore them yourself. &lt;hr&gt;&lt;p&gt;Testing Jakarta EE 9 Applications with Arquillian and WildFly was originally published in ITNEXT on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;" />
<meta property="og:site_name" content="blank" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Testing Jakarta EE 9 Applications with Arquillian and WildFly" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-07-14T00:00:00+00:00","datePublished":"2021-07-14T00:00:00+00:00","description":"With the long-awaited Jakarta EE 9 support issue was fixed in the newest 5.0.0.Alpha1 version of WildFly Arquillian project, finally we can test Jakarta EE 9 applications against WildFly application server with the newest Arquillian adapters. Photo by Evgeny Nelmin on Unsplash In this post, we will explore testing Jakarta EE 9 application with various WildFly Arquillian adapters. WildFly Arquillian Managed Container, in this case the Arquillian controller is responsible for starting and stopping the WildFly server via administrative tools.WildFly Arquillian Remote Container, Arquillian does not start and stop the WildFly server, it deploys the test archive to a running WildFly server through available remote protocols, such as HTTP, JMX etc.WildFly Arquillian Embedded Container, similar to the managed adapter, but embedded adapter controls the WildFly server via embedded WildFly APIs, generally the test itself and the server would run on the same thread.WildFly Arquillian Managed Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Remote Domain Container, use a single domain instead of the standalone server.WildFly Arquillian Bootable JAR Container, it deploys the test archive on the bootable JAR built by maven bootable jar plugin. Here we focus on the first three adapters. Prerequisites Java 11 (OpenJDK or AdoptOpenJDK)The latest Apache MavenThe basic knowledge of JUnit 5Get to know the basic of ArquillianDownload a copy of WildFly server, please download the Jakarta EE 9 tech preview version. Code Examples Get the source codes from my Github, and read the docs to understand the project structure and the existing source codes. We will focus on the Arquillian configurations for these WildFly adapters. Configuring WildFly Managed Container Adapter Add the following dependencies into your project, the Jersey related dependencies are used for test RESTful APIs using JAXRS Client API. WildFly includes its built-in JAXRS implementation — RESTEasy(maybe transformed by Jakarta EE 9 migration tools), but currently there is no public official RESTEasy versions released for Jakarta EE 9. &lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt; &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt; &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt; &lt;artifactId&gt;jersey-client&lt;/artifactId&gt; &lt;version&gt;${jersey.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-managed&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; Create a container configuration in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-managed&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; You can define a jbossHome property in the arquillian.xml file to specify the location of the existing WildFly server in your local system. Alternatively, to get a clean environment to run your tests every time, you can configure a Dependency Maven Plugin to download a copy of WildFly, and use it to run your tests. This is a great option to run the tests continuously in your CI servers. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-managed&lt;/arquillian.launch&gt; &lt;serverConfig&gt;standalone-full.xml&lt;/serverConfig&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Note: we use wildfly-preview-dist artifactId here to download the WildFly Jakarta EE 9 preview version. Open your terminal and witch to the project root folder. Run the following command to run the tests against WildFly server. mvn clean verify -Parq-wildfly-managed Configuring WildFly Remote Container Adapter With Arquillian WildFly Remote Container adapter, you can run the tests against a running WildFly server, esp. it is running on a different host. Adding the following wildfly-arquillian-container-remote dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-remote&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. And add a container section in the arquillian.xml file for this remote container, and configure the essential properties, such as username, password, protocoletc. &lt;container qualifier=&quot;wildfly-remote&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;protocol&quot;&gt;http-remoting&lt;/property&gt; &lt;property name=&quot;username&quot;&gt;admin&lt;/property&gt; &lt;property name=&quot;password&quot;&gt;Admin@123&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Before executing the tests, setup a admin user configured in the above codes. Go to the WildFly installation folder, run the following command to enable the user admin. &lt;WF_HOME&gt;/bin/add-user.sh admin Admin@123 --silent And make sure the target WildFly server is running. Execute the following command to run tests against the running WildFly server. mvn clean verfiy -Parq-wildfly-managed Configuring WildFly Embedded Container Adapter The configuration of the WildFly embedded adapter is similar to the WildFly managed adapter. Adding the following wildfly-arquillian-container-embedded dependency instead. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// the jersey client depdenceies are omitted. Configure a containerfor this WildFly Embedded adapter in the arquillian.xml file. &lt;container qualifier=&quot;wildfly-embedded&quot;&gt; &lt;configuration&gt; &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt; &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Similarly, use maven dependency plugin to download a copy of WildFly dist as the runtime server. &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;unpack&lt;/id&gt; &lt;phase&gt;pre-integration-test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;unpack&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;artifactItems&gt; &lt;artifactItem&gt; &lt;groupId&gt;org.wildfly&lt;/groupId&gt; &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt; &lt;version&gt;${wildfly.version}&lt;/version&gt; &lt;type&gt;zip&lt;/type&gt; &lt;overWrite&gt;false&lt;/overWrite&gt; &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt; &lt;/artifactItem&gt; &lt;/artifactItems&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt;&lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;environmentVariables&gt; &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt; &lt;/environmentVariables&gt; &lt;systemPropertyVariables&gt; &lt;arquillian.launch&gt;wildfly-embedded&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Run tests against WildFly Embedded adapter. mvn clean verfiy -Parq-wildfly-embedded Grab a copy of the source codes from my Github, and explore them yourself. &lt;hr&gt;&lt;p&gt;Testing Jakarta EE 9 Applications with Arquillian and WildFly was originally published in ITNEXT on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;","headline":"Testing Jakarta EE 9 Applications with Arquillian and WildFly","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2021/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly/"},"url":"/blog/2021/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly/"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body
  class="fixed-top-nav ">

  <!-- Header -->

  <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Hantsy</span>   Bai
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/service/">
                service
                
              </a>
          </li>
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


  <!-- Content -->

  <div class="container mt-5">
    

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Testing Jakarta EE 9 Applications with Arquillian and WildFly</h1>
    <p class="post-meta">July 14, 2021</p>
  </header>

  <article class="post-content">
    <p>With the long-awaited <a href="https://issues.redhat.com/projects/WFARQ/issues/WFARQ-89">Jakarta EE 9 support</a> issue was fixed in the newest 5.0.0.Alpha1 version of <a href="https://github.com/wildfly/wildfly-arquillian">WildFly Arquillian project</a>, finally we can test Jakarta EE 9 applications against WildFly application server with the newest Arquillian adapters.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*lgjXQLt2VoM5VAQAcb47IA.jpeg" /><figcaption>Photo by <a href="https://unsplash.com/@nelmin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Evgeny Nelmin</a> on <a href="https://unsplash.com/s/photos/china-landscape?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></figcaption></figure><p>In this post, we will explore testing Jakarta EE 9 application with various WildFly Arquillian adapters.</p><ul><li><em>WildFly Arquillian Managed Container</em>, in this case the Arquillian controller is responsible for starting and stopping the WildFly server via administrative tools.</li><li><em>WildFly Arquillian Remote Container</em>, Arquillian does not start and stop the WildFly server, it deploys the test archive to a running WildFly server through available remote protocols, such as HTTP, JMX etc.</li><li><em>WildFly Arquillian Embedded Container</em>, similar to the managed adapter, but embedded adapter controls the WildFly server via embedded WildFly APIs, generally the test itself and the server would run on the same thread.</li><li><em>WildFly Arquillian Managed Domain Container</em>, use a single domain instead of the standalone server.</li><li><em>WildFly Arquillian Remote Domain Container</em>, use a single domain instead of the standalone server.</li><li><em>WildFly Arquillian Bootable JAR Container</em>, it deploys the test archive on the bootable JAR built by maven bootable jar plugin.</li></ul><p>Here we focus on the first three adapters.</p><h3>Prerequisites</h3><ul><li>Java 11 (<a href="https://openjdk.java.net/install/">OpenJDK</a> or <a href="https://adoptopenjdk.net/installation.html">AdoptOpenJDK</a>)</li><li>The latest <a href="http://maven.apache.org/download.cgi">Apache Maven</a></li><li>The basic knowledge of <a href="https://junit.org/junit5/">JUnit 5</a></li><li>Get to know <a href="http://arquillian.org/guides/">the basic of Arquillian</a></li><li>Download a copy of <a href="https://www.wildfly.org">WildFly</a> server, please download the <em>Jakarta EE 9 tech preview</em> version.</li></ul><h3>Code Examples</h3><p>Get <a href="https://github.com/hantsy/jakartaee9-starter-boilerplate">the source codes from my Github</a>, and read <a href="https://hantsy.github.io/jakartaee9-starter-boilerplate/">the docs</a> to understand the project structure and the existing source codes. We will focus on the Arquillian configurations for these WildFly adapters.</p><h3>Configuring WildFly Managed Container Adapter</h3><p>Add the following dependencies into your project, the Jersey related dependencies are used for test RESTful APIs using <em>JAXRS Client</em> API. WildFly includes its built-in JAXRS implementation — RESTEasy(maybe transformed by Jakarta EE 9 migration tools), but currently there is no public official RESTEasy versions released for Jakarta EE 9.</p><pre>&lt;dependency&gt;<br>    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;<br>    &lt;artifactId&gt;jersey-media-json-binding&lt;/artifactId&gt;<br>    &lt;version&gt;${jersey.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;<br>    &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;<br>    &lt;version&gt;${jersey.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;<br>    &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;<br>    &lt;version&gt;${jersey.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-arquillian-container-managed&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;</pre><p>Create a container configuration in the <em>arquillian.xml</em> file.</p><pre>&lt;container qualifier=&quot;wildfly-managed&quot;&gt;<br>    &lt;configuration&gt;<br>        &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt;<br>        &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt;<br>    &lt;/configuration&gt;<br>&lt;/container&gt;</pre><p>You can define a jbossHome property in the <em>arquillian.xml</em> file to specify the location of the existing WildFly server in your local system.</p><p>Alternatively, to get a clean environment to run your tests every time, you can configure a <strong>Dependency Maven Plugin</strong> to download a copy of WildFly, and use it to run your tests. This is a great option to run the tests continuously in your CI servers.</p><pre>&lt;plugin&gt;<br>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;<br>    &lt;executions&gt;<br>        &lt;execution&gt;<br>            &lt;id&gt;unpack&lt;/id&gt;<br>            &lt;phase&gt;pre-integration-test&lt;/phase&gt;<br>            &lt;goals&gt;<br>                &lt;goal&gt;unpack&lt;/goal&gt;<br>            &lt;/goals&gt;<br>            &lt;configuration&gt;<br>                &lt;artifactItems&gt;<br>                    &lt;artifactItem&gt;<br>                        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;<br>                        &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt;<br>                        &lt;version&gt;${wildfly.version}&lt;/version&gt;<br>                        &lt;type&gt;zip&lt;/type&gt;<br>                        &lt;overWrite&gt;false&lt;/overWrite&gt;<br>                        &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;<br>                    &lt;/artifactItem&gt;<br>                &lt;/artifactItems&gt;<br>            &lt;/configuration&gt;<br>        &lt;/execution&gt;<br>    &lt;/executions&gt;<br>&lt;/plugin&gt;<br>&lt;plugin&gt;<br>    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt;<br>    &lt;configuration&gt;<br>        &lt;environmentVariables&gt;<br>            &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt;<br>        &lt;/environmentVariables&gt;<br>        &lt;systemPropertyVariables&gt;<br>            &lt;arquillian.launch&gt;wildfly-managed&lt;/arquillian.launch&gt;<br>            &lt;serverConfig&gt;standalone-full.xml&lt;/serverConfig&gt;<br>            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;<br>        &lt;/systemPropertyVariables&gt;<br>    &lt;/configuration&gt;<br>&lt;/plugin&gt;</pre><blockquote><em>Note: we use </em><em>wildfly-preview-dist artifactId here to download the WildFly Jakarta EE 9 preview version.</em></blockquote><p>Open your terminal and witch to the project root folder.</p><p>Run the following command to run the tests against WildFly server.</p><pre>mvn clean verify -Parq-wildfly-managed</pre><h3>Configuring WildFly Remote Container Adapter</h3><p>With Arquillian WildFly Remote Container adapter, you can run the tests against a running WildFly server, esp. it is running on a different host.</p><p>Adding the following wildfly-arquillian-container-remote dependency instead.</p><pre>&lt;dependency&gt;<br>    &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-arquillian-container-remote&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>// the jersey client depdenceies are omitted.</pre><p>And add a <em>container</em> section in the <em>arquillian.xml</em> file for this remote container, and configure the essential properties, such as username, password, protocoletc.</p><pre>&lt;container qualifier=&quot;wildfly-remote&quot;&gt;<br>    &lt;configuration&gt;<br>        &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt;<br>        &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt;<br>        &lt;property name=&quot;protocol&quot;&gt;http-remoting&lt;/property&gt;<br>        &lt;property name=&quot;username&quot;&gt;admin&lt;/property&gt;<br>        &lt;property name=&quot;password&quot;&gt;Admin@123&lt;/property&gt;<br>    &lt;/configuration&gt;<br>&lt;/container&gt;</pre><p>Before executing the tests, setup a admin user configured in the above codes. Go to the WildFly installation folder, run the following command to enable the user <em>admin</em>.</p><pre>&lt;WF_HOME&gt;/bin/add-user.sh admin Admin@123 --silent</pre><p>And make sure the target WildFly server is running.</p><p>Execute the following command to run tests against the running WildFly server.</p><pre>mvn clean verfiy -Parq-wildfly-managed</pre><h3>Configuring WildFly Embedded Container Adapter</h3><p>The configuration of the WildFly embedded adapter is similar to the WildFly managed adapter.</p><p>Adding the following wildfly-arquillian-container-embedded dependency instead.</p><pre>&lt;dependency&gt;<br>    &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-arquillian-container-embedded&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>// the jersey client depdenceies are omitted.</pre><p>Configure a containerfor this WildFly Embedded adapter in the <em>arquillian.xml</em> file.</p><pre>&lt;container qualifier=&quot;wildfly-embedded&quot;&gt;<br>    &lt;configuration&gt;<br>        &lt;!--&lt;property name=&quot;jbossHome&quot;&gt;${jbossHome:target/wildfly-18.0.1.Final}&lt;/property&gt;--&gt;<br>        &lt;property name=&quot;serverConfig&quot;&gt;standalone-full.xml&lt;/property&gt;<br>    &lt;/configuration&gt;<br>&lt;/container&gt;</pre><p>Similarly, use maven dependency plugin to download a copy of WildFly dist as the runtime server.</p><pre>&lt;plugin&gt;<br>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<br>    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;<br>    &lt;executions&gt;<br>        &lt;execution&gt;<br>            &lt;id&gt;unpack&lt;/id&gt;<br>            &lt;phase&gt;pre-integration-test&lt;/phase&gt;<br>            &lt;goals&gt;<br>                &lt;goal&gt;unpack&lt;/goal&gt;<br>            &lt;/goals&gt;<br>            &lt;configuration&gt;<br>                &lt;artifactItems&gt;<br>                    &lt;artifactItem&gt;<br>                        &lt;groupId&gt;org.wildfly&lt;/groupId&gt;<br>                        &lt;artifactId&gt;wildfly-preview-dist&lt;/artifactId&gt;<br>                        &lt;version&gt;${wildfly.version}&lt;/version&gt;<br>                        &lt;type&gt;zip&lt;/type&gt;<br>                        &lt;overWrite&gt;false&lt;/overWrite&gt;<br>                        &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;<br>                    &lt;/artifactItem&gt;<br>                &lt;/artifactItems&gt;<br>            &lt;/configuration&gt;<br>        &lt;/execution&gt;<br>    &lt;/executions&gt;<br>&lt;/plugin&gt;<br>&lt;plugin&gt;<br>    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt;<br>    &lt;configuration&gt;<br>        &lt;environmentVariables&gt;<br>            &lt;JBOSS_HOME&gt;${project.build.directory}/wildfly-preview-${wildfly.version}&lt;/JBOSS_HOME&gt;<br>        &lt;/environmentVariables&gt;<br>        &lt;systemPropertyVariables&gt;<br>            &lt;arquillian.launch&gt;wildfly-embedded&lt;/arquillian.launch&gt;<br>            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;<br>        &lt;/systemPropertyVariables&gt;<br>    &lt;/configuration&gt;<br>&lt;/plugin&gt;</pre><p>Run tests against WildFly Embedded adapter.</p><pre>mvn clean verfiy -Parq-wildfly-embedded</pre><h4>Grab a copy of <a href="https://github.com/hantsy/jakartaee9-starter-boilerplate">the source codes from my Github</a>, and explore them yourself.</h4><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=cd108eec57e2" width="1" height="1" alt=""><hr><p><a href="https://itnext.io/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly-cd108eec57e2">Testing Jakarta EE 9 Applications with Arquillian and WildFly</a> was originally published in <a href="https://itnext.io">ITNEXT</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>

  </article>

  

</div>

  </div>

  <!-- Footer -->

  
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2022 Hantsy  Bai.
    <span class="mr-auto"></span>
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme.

    
    

  </div>
</footer>



</body>

<!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>


<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>





<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
