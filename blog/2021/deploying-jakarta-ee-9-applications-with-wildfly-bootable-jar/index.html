<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>
  Hantsy
  
  Bai
  
  
  | Deploying Jakarta EE 9 applications with WildFly Bootable JAR
  
</title>
<meta name="description" content="My personal website focusing on Java EE/Jakarta EE and Spring.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css"
  integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css"
  integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css"
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet"
  href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<link rel="stylesheet" href="/assets/css/main.css">

<link rel="canonical" href="/blog/2021/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-18SZ2W3GXD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-18SZ2W3GXD');
</script>




  
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="blank" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Deploying Jakarta EE 9 applications with WildFly Bootable JAR" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Since WildFly 21 was released, it is possible to build your application and the WildFly runtime into a single fat JAR file through the new wildfly-jar-maven-plugin . For developers, through this maven plugin, it brings the well-known Spring Boot building progress to Jakarta EE/WildFly world. Photo by Robynne Hu on Unsplash Prerequisites Make sure you have installed the following software. Java 11 , OpenJDK or AdoptOpenJDKApache Maven 3.6+WildFly 24.0.0.Final, please download the Jakarta EE 9 preview distributionOpenShift CLI Building a Bootable JAR Firstly add wildfly-jar-maven-plugin configuration. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;/layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; The feature-pack-location defines the infrastructure feature it will be used to build the application, and layers specifies which layers will be activated More details about layers, please refer to the bootable jar documentation and read the Galleon layers chapter. In the feature pack, we use wildfly-preview to use the Jakarta EE 9 preview. Run the following command to build the application. mvn clean package -Pwildfly-bootable Besides the generic war package built by maven war plugin, there is another jar file with -bootable.jar postfix is built by wildfly-jar-maven-plugin. Run the following command to start application. java -jar target\jakartaee9-starter-boilerplate-bootable.jar Use curl command to test the sample endpoint. curl -v http://localhost:8080/api/greeting/JakartaEE Note, in the bootable jar, by default it sets the application context path to root(“/”). Deploying to OpenShift The wildfly-jar-maven-plugin provides out-of-box cloud support. You can use it together with openshift-maven-plugin and build application into docker image from source codes and deploy to the OpenShift cluster. There are several options to use OpenShift, check the official website for details. The simplest way is registering RedHat hosted OpenShift cloud, it provides a free Developer sandbox plan. Once you have registered, it will provide you an interactive Web UI for developers and administrators views. To use openshift-maven-plugin , you have to login firstly. In the OpenShift home page, click the question(?) icon button in the top right area, and click the command line tools menu item. Copy the oc login command line in the opened page. More details, please refer to this guide. Assume you have installed OpenShift CLI, open a terminal, paste the command to login into the OpenShift cloud. oc login ... Next let’s configure the wildfly-jar-maven-plugin and openshift-maven-plugin. &lt;properties&gt; &lt;jkube.generator.from&gt;registry.redhat.io/ubi8/openjdk-11:latest&lt;/jkube.generator.from&gt;&lt;/properties&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;cloud-server&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;cloud/&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.eclipse.jkube&lt;/groupId&gt; &lt;artifactId&gt;openshift-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${openshift-maven-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;resource&lt;/goal&gt; &lt;goal&gt;build&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;configuration&gt; &lt;enricher&gt; &lt;config&gt; &lt;jkube-service&gt; &lt;type&gt;NodePort&lt;/type&gt; &lt;/jkube-service&gt; &lt;/config&gt; &lt;/enricher&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; Here we use a cloud-server layer instead of the former jaxrs, and add another openshift-maven-plugin configuration. More details about the OpenShift maven plugin, see Eclipse JKube documentation. Run the following command to deploy application to OpenShift cloud. mvn clean oc:deploy -Pwildfly-openshift After it is done, you can watch the pod nodes via the following command. oc get pods -w Go to the OpenShift Web UI, and click the Project in the left pane, then you can see all related resources, including Pod Nodes, Services, Routes, etc. Click Pods, and select jakartaee9-starter-boilerplate-1-xxxxx, then switch to Terminal tab, try to use curl to check our application is working well. curl -v http://localhost:8080/api/greeting/JakartaEE The result is similar to the following screen. Go back to Project view, and click Routes, and select jakartaee9-starter-boilerplate. In the detail page, you can find the external URL of this deployed application(or you can get it via the following command). Try to access the sample API endpoint through the external URL. $ oc get route jakartaee9-starter-boilerplate -o jsonpath=&quot;{.spec.host}&quot;jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com $ curl -v http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE &gt; GET /api/greeting/JakartaEE HTTP/1.1&gt; Host: jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com&gt; User-Agent: curl/7.55.1&gt; Accept: */*&gt;&lt; HTTP/1.1 200 OK&lt; content-type: application/json&lt; content-length: 66&lt; date: Thu, 15 Jul 2021 14:02:46 GMT&lt; set-cookie: 8f1aeb5fdab055810cd99f63982ad17b=1540c81cbcc1728a7c020191c74f5fa7; path=/; HttpOnly&lt; cache-control: private&lt;{&quot;message&quot;:&quot;Say Hello to JakartaEE at 2021-07-15T14:02:46.571707&quot;} Running Arquillian Tests against Bootable JAR As mentioned in the last post, WildFly Arqullian project includes a bootable container adapter for testing against the bootable jar. Add the following dependency in the project pom.xml file. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-bootable&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// jerseys are omitted. Add wildfly-jar-maven-plugin to build a bootable fat JAR for testing purpose. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;layer&gt;management&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; Create a new container in the arquillian.xml for this adapter. &lt;container qualifier=&quot;wildfly-bootable-jar&quot; default=&quot;true&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;jarFile&quot;&gt;${bootable.jar}&lt;/property&gt; &lt;property name=&quot;allowConnectingToRunningServer&quot;&gt;false&lt;/property&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPorts&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPortsTimeoutInSeconds&quot;&gt;8&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Define a system wide property bootable.jar in the configuration of maven failsafe plugin . &lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;systemPropertyVariables&gt; &lt;bootable.jar&gt;${project.build.directory}/${project.artifactId}-bootable.jar &lt;/bootable.jar&gt; &lt;arquillian.launch&gt;wildfly-bootable-jar&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Now run the tests using the following command. mvn clean verify -Parq-wildfly-bootable-jar Grab the example codes from my Github. &lt;hr&gt;&lt;p&gt;Deploying Jakarta EE 9 applications with WildFly Bootable JAR was originally published in Geek Culture on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;" />
<meta property="og:description" content="Since WildFly 21 was released, it is possible to build your application and the WildFly runtime into a single fat JAR file through the new wildfly-jar-maven-plugin . For developers, through this maven plugin, it brings the well-known Spring Boot building progress to Jakarta EE/WildFly world. Photo by Robynne Hu on Unsplash Prerequisites Make sure you have installed the following software. Java 11 , OpenJDK or AdoptOpenJDKApache Maven 3.6+WildFly 24.0.0.Final, please download the Jakarta EE 9 preview distributionOpenShift CLI Building a Bootable JAR Firstly add wildfly-jar-maven-plugin configuration. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;/layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; The feature-pack-location defines the infrastructure feature it will be used to build the application, and layers specifies which layers will be activated More details about layers, please refer to the bootable jar documentation and read the Galleon layers chapter. In the feature pack, we use wildfly-preview to use the Jakarta EE 9 preview. Run the following command to build the application. mvn clean package -Pwildfly-bootable Besides the generic war package built by maven war plugin, there is another jar file with -bootable.jar postfix is built by wildfly-jar-maven-plugin. Run the following command to start application. java -jar target\jakartaee9-starter-boilerplate-bootable.jar Use curl command to test the sample endpoint. curl -v http://localhost:8080/api/greeting/JakartaEE Note, in the bootable jar, by default it sets the application context path to root(“/”). Deploying to OpenShift The wildfly-jar-maven-plugin provides out-of-box cloud support. You can use it together with openshift-maven-plugin and build application into docker image from source codes and deploy to the OpenShift cluster. There are several options to use OpenShift, check the official website for details. The simplest way is registering RedHat hosted OpenShift cloud, it provides a free Developer sandbox plan. Once you have registered, it will provide you an interactive Web UI for developers and administrators views. To use openshift-maven-plugin , you have to login firstly. In the OpenShift home page, click the question(?) icon button in the top right area, and click the command line tools menu item. Copy the oc login command line in the opened page. More details, please refer to this guide. Assume you have installed OpenShift CLI, open a terminal, paste the command to login into the OpenShift cloud. oc login ... Next let’s configure the wildfly-jar-maven-plugin and openshift-maven-plugin. &lt;properties&gt; &lt;jkube.generator.from&gt;registry.redhat.io/ubi8/openjdk-11:latest&lt;/jkube.generator.from&gt;&lt;/properties&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;cloud-server&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;cloud/&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.eclipse.jkube&lt;/groupId&gt; &lt;artifactId&gt;openshift-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${openshift-maven-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;resource&lt;/goal&gt; &lt;goal&gt;build&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;configuration&gt; &lt;enricher&gt; &lt;config&gt; &lt;jkube-service&gt; &lt;type&gt;NodePort&lt;/type&gt; &lt;/jkube-service&gt; &lt;/config&gt; &lt;/enricher&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; Here we use a cloud-server layer instead of the former jaxrs, and add another openshift-maven-plugin configuration. More details about the OpenShift maven plugin, see Eclipse JKube documentation. Run the following command to deploy application to OpenShift cloud. mvn clean oc:deploy -Pwildfly-openshift After it is done, you can watch the pod nodes via the following command. oc get pods -w Go to the OpenShift Web UI, and click the Project in the left pane, then you can see all related resources, including Pod Nodes, Services, Routes, etc. Click Pods, and select jakartaee9-starter-boilerplate-1-xxxxx, then switch to Terminal tab, try to use curl to check our application is working well. curl -v http://localhost:8080/api/greeting/JakartaEE The result is similar to the following screen. Go back to Project view, and click Routes, and select jakartaee9-starter-boilerplate. In the detail page, you can find the external URL of this deployed application(or you can get it via the following command). Try to access the sample API endpoint through the external URL. $ oc get route jakartaee9-starter-boilerplate -o jsonpath=&quot;{.spec.host}&quot;jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com $ curl -v http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE &gt; GET /api/greeting/JakartaEE HTTP/1.1&gt; Host: jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com&gt; User-Agent: curl/7.55.1&gt; Accept: */*&gt;&lt; HTTP/1.1 200 OK&lt; content-type: application/json&lt; content-length: 66&lt; date: Thu, 15 Jul 2021 14:02:46 GMT&lt; set-cookie: 8f1aeb5fdab055810cd99f63982ad17b=1540c81cbcc1728a7c020191c74f5fa7; path=/; HttpOnly&lt; cache-control: private&lt;{&quot;message&quot;:&quot;Say Hello to JakartaEE at 2021-07-15T14:02:46.571707&quot;} Running Arquillian Tests against Bootable JAR As mentioned in the last post, WildFly Arqullian project includes a bootable container adapter for testing against the bootable jar. Add the following dependency in the project pom.xml file. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-bootable&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// jerseys are omitted. Add wildfly-jar-maven-plugin to build a bootable fat JAR for testing purpose. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;layer&gt;management&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; Create a new container in the arquillian.xml for this adapter. &lt;container qualifier=&quot;wildfly-bootable-jar&quot; default=&quot;true&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;jarFile&quot;&gt;${bootable.jar}&lt;/property&gt; &lt;property name=&quot;allowConnectingToRunningServer&quot;&gt;false&lt;/property&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPorts&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPortsTimeoutInSeconds&quot;&gt;8&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Define a system wide property bootable.jar in the configuration of maven failsafe plugin . &lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;systemPropertyVariables&gt; &lt;bootable.jar&gt;${project.build.directory}/${project.artifactId}-bootable.jar &lt;/bootable.jar&gt; &lt;arquillian.launch&gt;wildfly-bootable-jar&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Now run the tests using the following command. mvn clean verify -Parq-wildfly-bootable-jar Grab the example codes from my Github. &lt;hr&gt;&lt;p&gt;Deploying Jakarta EE 9 applications with WildFly Bootable JAR was originally published in Geek Culture on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;" />
<meta property="og:site_name" content="blank" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-16T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Deploying Jakarta EE 9 applications with WildFly Bootable JAR" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-07-16T00:00:00+00:00","datePublished":"2021-07-16T00:00:00+00:00","description":"Since WildFly 21 was released, it is possible to build your application and the WildFly runtime into a single fat JAR file through the new wildfly-jar-maven-plugin . For developers, through this maven plugin, it brings the well-known Spring Boot building progress to Jakarta EE/WildFly world. Photo by Robynne Hu on Unsplash Prerequisites Make sure you have installed the following software. Java 11 , OpenJDK or AdoptOpenJDKApache Maven 3.6+WildFly 24.0.0.Final, please download the Jakarta EE 9 preview distributionOpenShift CLI Building a Bootable JAR Firstly add wildfly-jar-maven-plugin configuration. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;/layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; The feature-pack-location defines the infrastructure feature it will be used to build the application, and layers specifies which layers will be activated More details about layers, please refer to the bootable jar documentation and read the Galleon layers chapter. In the feature pack, we use wildfly-preview to use the Jakarta EE 9 preview. Run the following command to build the application. mvn clean package -Pwildfly-bootable Besides the generic war package built by maven war plugin, there is another jar file with -bootable.jar postfix is built by wildfly-jar-maven-plugin. Run the following command to start application. java -jar target\\jakartaee9-starter-boilerplate-bootable.jar Use curl command to test the sample endpoint. curl -v http://localhost:8080/api/greeting/JakartaEE Note, in the bootable jar, by default it sets the application context path to root(“/”). Deploying to OpenShift The wildfly-jar-maven-plugin provides out-of-box cloud support. You can use it together with openshift-maven-plugin and build application into docker image from source codes and deploy to the OpenShift cluster. There are several options to use OpenShift, check the official website for details. The simplest way is registering RedHat hosted OpenShift cloud, it provides a free Developer sandbox plan. Once you have registered, it will provide you an interactive Web UI for developers and administrators views. To use openshift-maven-plugin , you have to login firstly. In the OpenShift home page, click the question(?) icon button in the top right area, and click the command line tools menu item. Copy the oc login command line in the opened page. More details, please refer to this guide. Assume you have installed OpenShift CLI, open a terminal, paste the command to login into the OpenShift cloud. oc login ... Next let’s configure the wildfly-jar-maven-plugin and openshift-maven-plugin. &lt;properties&gt; &lt;jkube.generator.from&gt;registry.redhat.io/ubi8/openjdk-11:latest&lt;/jkube.generator.from&gt;&lt;/properties&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;cloud-server&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;cloud/&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.eclipse.jkube&lt;/groupId&gt; &lt;artifactId&gt;openshift-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${openshift-maven-plugin.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;resource&lt;/goal&gt; &lt;goal&gt;build&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;configuration&gt; &lt;enricher&gt; &lt;config&gt; &lt;jkube-service&gt; &lt;type&gt;NodePort&lt;/type&gt; &lt;/jkube-service&gt; &lt;/config&gt; &lt;/enricher&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; Here we use a cloud-server layer instead of the former jaxrs, and add another openshift-maven-plugin configuration. More details about the OpenShift maven plugin, see Eclipse JKube documentation. Run the following command to deploy application to OpenShift cloud. mvn clean oc:deploy -Pwildfly-openshift After it is done, you can watch the pod nodes via the following command. oc get pods -w Go to the OpenShift Web UI, and click the Project in the left pane, then you can see all related resources, including Pod Nodes, Services, Routes, etc. Click Pods, and select jakartaee9-starter-boilerplate-1-xxxxx, then switch to Terminal tab, try to use curl to check our application is working well. curl -v http://localhost:8080/api/greeting/JakartaEE The result is similar to the following screen. Go back to Project view, and click Routes, and select jakartaee9-starter-boilerplate. In the detail page, you can find the external URL of this deployed application(or you can get it via the following command). Try to access the sample API endpoint through the external URL. $ oc get route jakartaee9-starter-boilerplate -o jsonpath=&quot;{.spec.host}&quot;jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com $ curl -v http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE &gt; GET /api/greeting/JakartaEE HTTP/1.1&gt; Host: jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com&gt; User-Agent: curl/7.55.1&gt; Accept: */*&gt;&lt; HTTP/1.1 200 OK&lt; content-type: application/json&lt; content-length: 66&lt; date: Thu, 15 Jul 2021 14:02:46 GMT&lt; set-cookie: 8f1aeb5fdab055810cd99f63982ad17b=1540c81cbcc1728a7c020191c74f5fa7; path=/; HttpOnly&lt; cache-control: private&lt;{&quot;message&quot;:&quot;Say Hello to JakartaEE at 2021-07-15T14:02:46.571707&quot;} Running Arquillian Tests against Bootable JAR As mentioned in the last post, WildFly Arqullian project includes a bootable container adapter for testing against the bootable jar. Add the following dependency in the project pom.xml file. &lt;dependency&gt; &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt; &lt;artifactId&gt;wildfly-arquillian-container-bootable&lt;/artifactId&gt; &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;// jerseys are omitted. Add wildfly-jar-maven-plugin to build a bootable fat JAR for testing purpose. &lt;plugin&gt; &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt; &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;feature-pack-location&gt; wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version} &lt;/feature-pack-location&gt; &lt;layers&gt; &lt;layer&gt;jaxrs&lt;/layer&gt; &lt;layer&gt;management&lt;/layer&gt; &lt;/layers&gt; &lt;excluded-layers&gt; &lt;layer&gt;deployment-scanner&lt;/layer&gt; &lt;/excluded-layers&gt; &lt;plugin-options&gt; &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt; &lt;/plugin-options&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;package&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; Create a new container in the arquillian.xml for this adapter. &lt;container qualifier=&quot;wildfly-bootable-jar&quot; default=&quot;true&quot;&gt; &lt;configuration&gt; &lt;property name=&quot;jarFile&quot;&gt;${bootable.jar}&lt;/property&gt; &lt;property name=&quot;allowConnectingToRunningServer&quot;&gt;false&lt;/property&gt; &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt; &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPorts&quot;&gt;9990&lt;/property&gt; &lt;property name=&quot;waitForPortsTimeoutInSeconds&quot;&gt;8&lt;/property&gt; &lt;/configuration&gt;&lt;/container&gt; Define a system wide property bootable.jar in the configuration of maven failsafe plugin . &lt;plugin&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt; &lt;configuration&gt; &lt;systemPropertyVariables&gt; &lt;bootable.jar&gt;${project.build.directory}/${project.artifactId}-bootable.jar &lt;/bootable.jar&gt; &lt;arquillian.launch&gt;wildfly-bootable-jar&lt;/arquillian.launch&gt; &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt; &lt;/systemPropertyVariables&gt; &lt;/configuration&gt;&lt;/plugin&gt; Now run the tests using the following command. mvn clean verify -Parq-wildfly-bootable-jar Grab the example codes from my Github. &lt;hr&gt;&lt;p&gt;Deploying Jakarta EE 9 applications with WildFly Bootable JAR was originally published in Geek Culture on Medium, where people are continuing the conversation by highlighting and responding to this story.&lt;/p&gt;","headline":"Deploying Jakarta EE 9 applications with WildFly Bootable JAR","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2021/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar/"},"url":"/blog/2021/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar/"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body
  class="fixed-top-nav ">

  <!-- Header -->

  <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Hantsy</span>   Bai
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/service/">
                service
                
              </a>
          </li>
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


  <!-- Content -->

  <div class="container mt-5">
    

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Deploying Jakarta EE 9 applications with WildFly Bootable JAR</h1>
    <p class="post-meta">July 16, 2021</p>
  </header>

  <article class="post-content">
    <p>Since WildFly 21 was released, it is possible to build your application and the WildFly runtime into a single fat JAR file through the new wildfly-jar-maven-plugin . For developers, through this maven plugin, it brings the well-known Spring Boot building progress to Jakarta EE/WildFly world.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*9LvWuZ3Nwxhs4SaDBQ9viQ.jpeg" /><figcaption>Photo by <a href="https://unsplash.com/@robynnexy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Robynne Hu</a> on <a href="https://unsplash.com/s/photos/china-landscape?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></figcaption></figure><h3>Prerequisites</h3><p>Make sure you have installed the following software.</p><ul><li>Java 11 , OpenJDK or <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a></li><li>Apache Maven 3.6+</li><li><a href="https://www.wildfly.org">WildFly 24.0.0.Final</a>, please download the <em>Jakarta EE 9 preview</em> distribution</li><li><a href="https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html">OpenShift CLI</a></li></ul><h3>Building a Bootable JAR</h3><p>Firstly add wildfly-jar-maven-plugin configuration.</p><pre>&lt;plugin&gt;<br>    &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br>    &lt;configuration&gt;<br>        &lt;feature-pack-location&gt;<br>            wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br>        &lt;/feature-pack-location&gt;<br>        &lt;layers&gt;<br>            &lt;layer&gt;jaxrs&lt;/layer&gt;<br>        &lt;/layers&gt;<br>        &lt;plugin-options&gt;<br>            &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br>        &lt;/plugin-options&gt;<br>    &lt;/configuration&gt;<br>    &lt;executions&gt;<br>        &lt;execution&gt;<br>            &lt;goals&gt;<br>                &lt;goal&gt;package&lt;/goal&gt;<br>            &lt;/goals&gt;<br>        &lt;/execution&gt;<br>    &lt;/executions&gt;<br>&lt;/plugin&gt;</pre><p>The <em>feature-pack-location</em> defines the infrastructure feature it will be used to build the application, and <em>layers</em> specifies which layers will be activated</p><blockquote><em>More details about layers, please refer to the bootable jar documentation and read the </em><a href="https://docs.wildfly.org/bootablejar/#wildfly_jar_composing_custom_server_galleon"><em>Galleon layers</em></a><em> chapter.</em></blockquote><blockquote><em>In the feature pack, we use </em><em>wildfly-preview to use the Jakarta EE 9 preview.</em></blockquote><p>Run the following command to build the application.</p><pre>mvn clean package -Pwildfly-bootable</pre><p>Besides the generic <em>war</em> package built by maven war plugin, there is another jar file with <em>-bootable.jar</em> postfix is built by wildfly-jar-maven-plugin.</p><p>Run the following command to start application.</p><pre>java -jar target\jakartaee9-starter-boilerplate-bootable.jar</pre><p>Use curl command to test the sample endpoint.</p><pre>curl -v <a href="http://localhost:8080/api/greeting/JakartaEE">http://localhost:8080/api/greeting/JakartaEE</a></pre><blockquote><em>Note, in the bootable jar, by default it sets the application context path to root(“/”).</em></blockquote><h3>Deploying to OpenShift</h3><p>The wildfly-jar-maven-plugin provides out-of-box cloud support. You can use it together with openshift-maven-plugin and build application into docker image from source codes and deploy to the OpenShift cluster.</p><p>There are several options to use OpenShift, check <a href="https://www.openshift.com">the official website</a> for details.</p><p>The simplest way is registering RedHat hosted OpenShift cloud, it provides a free <em>Developer sandbox</em> plan. Once you have registered, it will provide you an interactive Web UI for developers and administrators views.</p><p>To use openshift-maven-plugin , you have to login firstly. In the OpenShift home page, click the <em>question(?)</em> icon button in the top right area, and click the <em>command line tools</em> menu item. Copy the <em>oc login command line</em> in the opened page. More details, please refer to <a href="https://developers.redhat.com/blog/2021/04/21/access-your-developer-sandbox-for-red-hat-openshift-from-the-command-line#">this guide</a>.</p><p>Assume you have installed <a href="https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html">OpenShift CLI</a>, open a terminal, paste the command to login into the OpenShift cloud.</p><pre>oc login ...</pre><p>Next let’s configure the wildfly-jar-maven-plugin and openshift-maven-plugin.</p><pre>&lt;properties&gt;<br>    &lt;jkube.generator.from&gt;registry.redhat.io/ubi8/openjdk-11:latest&lt;/jkube.generator.from&gt;<br>&lt;/properties&gt;<br>&lt;build&gt;<br>    &lt;plugins&gt;<br>        &lt;plugin&gt;<br>            &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br>            &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br>            &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br>            &lt;configuration&gt;<br>                &lt;feature-pack-location&gt;<br>                    wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br>                &lt;/feature-pack-location&gt;<br>                &lt;layers&gt;<br>                    &lt;layer&gt;cloud-server&lt;/layer&gt;<br>                &lt;/layers&gt;<br>                &lt;excluded-layers&gt;<br>                    &lt;layer&gt;deployment-scanner&lt;/layer&gt;<br>                &lt;/excluded-layers&gt;<br>                &lt;cloud/&gt;<br>                &lt;plugin-options&gt;<br>                    &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br>                &lt;/plugin-options&gt;<br>            &lt;/configuration&gt;<br>            &lt;executions&gt;<br>                &lt;execution&gt;<br>                    &lt;goals&gt;<br>                        &lt;goal&gt;package&lt;/goal&gt;<br>                    &lt;/goals&gt;<br>                &lt;/execution&gt;<br>            &lt;/executions&gt;<br>        &lt;/plugin&gt;<br>        &lt;plugin&gt;<br>            &lt;groupId&gt;org.eclipse.jkube&lt;/groupId&gt;<br>            &lt;artifactId&gt;openshift-maven-plugin&lt;/artifactId&gt;<br>            &lt;version&gt;${openshift-maven-plugin.version}&lt;/version&gt;<br>            &lt;executions&gt;<br>                &lt;execution&gt;<br>                    &lt;goals&gt;<br>                        &lt;goal&gt;resource&lt;/goal&gt;<br>                        &lt;goal&gt;build&lt;/goal&gt;<br>                    &lt;/goals&gt;<br>                &lt;/execution&gt;<br>            &lt;/executions&gt;<br>            &lt;configuration&gt;<br>                &lt;enricher&gt;<br>                    &lt;config&gt;<br>                        &lt;jkube-service&gt;<br>                            &lt;type&gt;NodePort&lt;/type&gt;<br>                        &lt;/jkube-service&gt;<br>                    &lt;/config&gt;<br>                &lt;/enricher&gt;<br>            &lt;/configuration&gt;<br>        &lt;/plugin&gt;<br>    &lt;/plugins&gt;<br>&lt;/build&gt;</pre><p>Here we use a <em>cloud-server</em> layer instead of the former <em>jaxrs</em>, and add another openshift-maven-plugin configuration.</p><blockquote><em>More details about the OpenShift maven plugin, see </em><a href="https://www.eclipse.org/jkube/docs/openshift-maven-plugin"><em>Eclipse JKube documentation</em></a><em>.</em></blockquote><p>Run the following command to deploy application to OpenShift cloud.</p><pre>mvn clean oc:deploy -Pwildfly-openshift</pre><p>After it is done, you can watch the pod nodes via the following command.</p><pre>oc get pods -w</pre><p>Go to the OpenShift Web UI, and click the <em>Project</em> in the left pane, then you can see all related resources, including Pod Nodes, Services, Routes, etc.</p><p>Click <em>Pods</em>, and select <em>jakartaee9-starter-boilerplate-1-xxxxx</em>, then switch to <em>Terminal</em> tab, try to use curl to check our application is working well.</p><pre>curl -v <a href="http://localhost:8080/api/greeting/JakartaEE">http://localhost:8080/api/greeting/JakartaEE</a></pre><p>The result is similar to the following screen.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*UcdDwa6Y_-jf1s4I.png" /></figure><p>Go back to <em>Project</em> view, and click <em>Routes</em>, and select <em>jakartaee9-starter-boilerplate</em>. In the detail page, you can find the external URL of this deployed application(or you can get it via the following command).</p><p>Try to access the sample API endpoint through the external URL.</p><pre>$ oc get route jakartaee9-starter-boilerplate -o jsonpath=&quot;{.spec.host}&quot;<br>jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com</pre><pre>$ curl -v <a href="http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE">http://jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com/api/greeting/JakartaEE</a></pre><pre>&gt; GET /api/greeting/JakartaEE HTTP/1.1<br>&gt; Host: jakartaee9-starter-boilerplate-hantsy-dev.apps.sandbox-m2.ll9k.p1.openshiftapps.com<br>&gt; User-Agent: curl/7.55.1<br>&gt; Accept: */*<br>&gt;<br>&lt; HTTP/1.1 200 OK<br>&lt; content-type: application/json<br>&lt; content-length: 66<br>&lt; date: Thu, 15 Jul 2021 14:02:46 GMT<br>&lt; set-cookie: 8f1aeb5fdab055810cd99f63982ad17b=1540c81cbcc1728a7c020191c74f5fa7; path=/; HttpOnly<br>&lt; cache-control: private<br>&lt;<br>{&quot;message&quot;:&quot;Say Hello to JakartaEE at 2021-07-15T14:02:46.571707&quot;}</pre><h3>Running Arquillian Tests against Bootable JAR</h3><p>As mentioned in <a href="https://itnext.io/testing-jakarta-ee-9-applications-with-arquillian-and-wildfly-cd108eec57e2">the last post</a>, WildFly Arqullian project includes a <em>bootable</em> container adapter for testing against the bootable jar.</p><p>Add the following dependency in the project <em>pom.xml</em> file.</p><pre>&lt;dependency&gt;<br>    &lt;groupId&gt;org.wildfly.arquillian&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-arquillian-container-bootable&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-arquillian.version}&lt;/version&gt;<br>    &lt;scope&gt;test&lt;/scope&gt;<br>&lt;/dependency&gt;<br>// jerseys are omitted.</pre><p>Add wildfly-jar-maven-plugin to build a <em>bootable</em> fat JAR for testing purpose.</p><pre>&lt;plugin&gt;<br>    &lt;groupId&gt;org.wildfly.plugins&lt;/groupId&gt;<br>    &lt;artifactId&gt;wildfly-jar-maven-plugin&lt;/artifactId&gt;<br>    &lt;version&gt;${wildfly-jar-maven-plugin.version}&lt;/version&gt;<br>    &lt;configuration&gt;<br>        &lt;feature-pack-location&gt;<br>            wildfly-preview@maven(org.jboss.universe:community-universe)#${wildfly.version}<br>        &lt;/feature-pack-location&gt;<br>        &lt;layers&gt;<br>            &lt;layer&gt;jaxrs&lt;/layer&gt;<br>            &lt;layer&gt;management&lt;/layer&gt;<br>        &lt;/layers&gt;<br>        &lt;excluded-layers&gt;<br>            &lt;layer&gt;deployment-scanner&lt;/layer&gt;<br>        &lt;/excluded-layers&gt;<br>        &lt;plugin-options&gt;<br>            &lt;jboss-fork-embedded&gt;true&lt;/jboss-fork-embedded&gt;<br>        &lt;/plugin-options&gt;<br>    &lt;/configuration&gt;<br>    &lt;executions&gt;<br>        &lt;execution&gt;<br>            &lt;goals&gt;<br>                &lt;goal&gt;package&lt;/goal&gt;<br>            &lt;/goals&gt;<br>        &lt;/execution&gt;<br>    &lt;/executions&gt;<br>&lt;/plugin&gt;</pre><p>Create a new <em>container</em> in the <em>arquillian.xml</em> for this adapter.</p><pre>&lt;container qualifier=&quot;wildfly-bootable-jar&quot; default=&quot;true&quot;&gt;<br>    &lt;configuration&gt;<br>        &lt;property name=&quot;jarFile&quot;&gt;${bootable.jar}&lt;/property&gt;<br>        &lt;property name=&quot;allowConnectingToRunningServer&quot;&gt;false&lt;/property&gt;<br>        &lt;property name=&quot;managementAddress&quot;&gt;127.0.0.1&lt;/property&gt;<br>        &lt;property name=&quot;managementPort&quot;&gt;9990&lt;/property&gt;<br>        &lt;property name=&quot;waitForPorts&quot;&gt;9990&lt;/property&gt;<br>        &lt;property name=&quot;waitForPortsTimeoutInSeconds&quot;&gt;8&lt;/property&gt;<br>    &lt;/configuration&gt;<br>&lt;/container&gt;</pre><p>Define a system wide property <em>bootable.jar</em> in the configuration of maven failsafe plugin .</p><pre>&lt;plugin&gt;<br>     &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;<br>     &lt;version&gt;${maven-failsafe-plugin.version}&lt;/version&gt;<br>     &lt;configuration&gt;<br>         &lt;systemPropertyVariables&gt;<br>             &lt;bootable.jar&gt;${project.build.directory}/${project.artifactId}-bootable.jar<br>             &lt;/bootable.jar&gt;<br>             &lt;arquillian.launch&gt;wildfly-bootable-jar&lt;/arquillian.launch&gt;<br>             &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;<br>         &lt;/systemPropertyVariables&gt;<br>     &lt;/configuration&gt;<br>&lt;/plugin&gt;</pre><p>Now run the tests using the following command.</p><pre>mvn clean verify -Parq-wildfly-bootable-jar</pre><p>Grab the <a href="https://github.com/hantsy/jakartaee9-starter-boilerplate">example codes from my Github</a>.</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=a6cd436da7ea" width="1" height="1" alt=""><hr><p><a href="https://medium.com/geekculture/deploying-jakarta-ee-9-applications-with-wildfly-bootable-jar-a6cd436da7ea">Deploying Jakarta EE 9 applications with WildFly Bootable JAR</a> was originally published in <a href="https://medium.com/geekculture">Geek Culture</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>

  </article>

  

</div>

  </div>

  <!-- Footer -->

  
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2022 Hantsy  Bai.
    <span class="mr-auto"></span>
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme.

    
    

  </div>
</footer>



</body>

<!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>


<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>





<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
